schema-version: 1.0

type: builder


const:
  srcDir: /usr/src


out:
  pcre2: /opt/pcre2

dependencies:
  - libtool
  - m4
  - automake
  - autoconf
  - zlib
  - bzip2

provision:
  - url:
      from: https://github.com/PhilipHazel/pcre2/archive/refs/tags/pcre2-{% version %}.tar.gz
      todir: "{% srcDir %}"

build:
  - shell:
      cmds:
        - CC=gcc ./configure --prefix=/usr -G -O3
        - make
#        - make test
        - make install DESTDIR={% pcre2 %}
      directory: "{% srcDir %}/pcre2-pcre2-{% version %}"
  - export: "{% pcre2 %}"

